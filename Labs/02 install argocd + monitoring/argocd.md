## <font color='red'> 1.2 ArgoCD </font>


In this lab we're going to:
* install ArgoCD
* setup monitoring with Prometheus & Grafana



#### <font color='red'>1.2.1  Install ArgoCD </font>

install ArgoCD:
```
kustomize build clusters/argocd/dev | k apply -f -
```
Note: this will take a few minutes...

verfiy ArgoCD:
```
kubectl get pods -n argocd
```
To deploy our manifests to the cluster we are using the app of apps pattern. For that we have to create a new Application, which manages all other applications (including Argo CD):
```
kubectl apply -f clusters/apps/dev.yaml
```

browse to ArgoCD > http://argocd-dev.fake

user: admin

initial password is autogenerated:
```
kubectl get pods -n argocd -l app.kubernetes.io/name=argocd-server -o name | cut -d'/' -f 2
```
Note: In the UI of Argo CD we can now see all deployed applications:

---


#### <font color='red'>1.2.2 Monitoring </font>
* Deploys the Prometheus Stack via the kube-prometheus-stack Helm chart.

* Prometheus is available at prometheus-dev.fake and Grafana at grafana-dev.fake

log into Prometheus:

 > http://prometheus-dev.fake

log into Grafana:

 > http://grafana-dev.fake

 user: admin
 password: admin

 import the example Dashboard for Argo CD:
```
 https://github.com/argoproj/argo-cd/blob/master/examples/dashboard.json
```

---